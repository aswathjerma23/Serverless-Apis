service: verify-phone
frameworkVersion: '4'

plugins:
  - serverless-offline

provider:
  name: aws
  runtime: nodejs18.x
  region: us-east-1

  environment:
    COGNITO_USER_POOL_ID: ${env:COGNITO_USER_POOL_ID}
    COGNITO_ENDPOINT: ${env:COGNITO_ENDPOINT}

functions:
  updatePhone:
    handler: functions/updatePhone.handler
    events:
      - httpApi:
          path: /api/update-phone-number
          method: POST

  verifyPhone:
    handler: functions/verifyPhone.handler
    events:
      - httpApi:
          path: /api/verify-updated-phone-number
          method: POST